(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b2a846a"],{"0af2":function(t,e,a){},"1c62":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Home"},[a("div",{staticClass:"con"},[a("div",{staticClass:"tlt flex"},[a("div",{on:{click:function(e){return e.stopPropagation(),t.my(e)}}},[a("div",{staticClass:"myName flex_c yihang",on:{click:function(e){return e.stopPropagation(),t.my(e)}}},[t._v(t._s(t.myName))])]),1==this.meMessage.workStatus?a("div",{staticClass:"right"},[a("p",[t._v("\n          状态\n          "),"1"==t.meMessage.nowStatus?a("i",[t._v(t._s(t.status1))]):t._e(),"2"==t.meMessage.nowStatus?a("i",[t._v(t._s(t.status2))]):t._e()]),"1"==t.meMessage.nowStatus?a("p",{on:{click:t.isStatus}},[t._v("状态调整")]):t._e(),"2"==t.meMessage.nowStatus?a("p",{on:{click:t.isStatus1}},[t._v("状态调整")]):t._e()]):t._e(),a("van-popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"popup"},[t._v("\n          请确认本次上岗操作，您将重新获得分配人权限\n          "),a("div",{staticClass:"btn flex"},[a("van-button",{attrs:{color:"#999"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),a("van-button",{attrs:{color:"#a48f36"},on:{click:t.end}},[t._v("确认")])],1)])])],1),a("div",{staticClass:"upMatter flex"},[a("span",[t._v("年度")]),a("div",{staticClass:"one"},["0"!=t.meMessage.totalCompleteEvents?a("p",[t._v(t._s(t.meMessage.totalCompleteEvents))]):a("p",[t._v("-")]),a("p",[t._v("完成报事")])]),a("div",{staticClass:"two"},["0"!=t.meMessage.totalCheckEvents?a("p",[t._v(t._s(t.meMessage.totalCheckEvents))]):a("p",[t._v("-")]),a("p",[t._v("验收数量")])]),a("div",{staticClass:"three"},["0"!=t.meMessage.totalReportEvents?a("p",[t._v(t._s(t.meMessage.totalReportEvents))]):a("p",[t._v("-")]),a("p",[t._v("报事数")])]),a("div",{staticClass:"four"},["0.0"!=t.meMessage.totalScore?a("p",[t._v(t._s(t.meMessage.totalScore))]):a("p",[t._v("-")]),a("p",[t._v("评价总分")])]),a("div",{staticClass:"five"},["0"!=t.meMessage.totalAvgScore?a("p",[t._v(t._s(t.meMessage.totalAvgScore))]):a("p",[t._v("-")]),a("p",[t._v("评价均分")])])]),a("div",{staticClass:"monthMatter flex"},[a("span",[t._v("本月")]),a("div",{staticClass:"one"},["0"!=t.meMessage.monthCompleteEvents?a("p",[t._v(t._s(t.meMessage.monthCompleteEvents))]):a("p",[t._v("-")]),a("p",[t._v("完成报事")])]),a("div",{staticClass:"two"},["0"!=t.meMessage.monthCheckEvents?a("p",[t._v(t._s(t.meMessage.monthCheckEvents))]):a("p",[t._v("-")]),a("p",[t._v("验收数量")])]),a("div",{staticClass:"three"},["0"!=t.meMessage.monthReportEvents?a("p",[t._v(t._s(t.meMessage.monthReportEvents))]):a("p",[t._v("-")]),a("p",[t._v("报事数")])]),a("div",{staticClass:"four"},["0.0"!=t.meMessage.monthScore?a("p",[t._v(t._s(t.meMessage.monthScore))]):a("p",[t._v("-")]),a("p",[t._v("评价总分")])]),a("div",{staticClass:"five"},["0"!=t.meMessage.monthAvgScore?a("p",[t._v(t._s(t.meMessage.monthAvgScore))]):a("p",[t._v("-")]),a("p",[t._v("评价均分")])])]),a("van-grid",{attrs:{"column-num":3,"icon-size":"50",border:!1,gutter:"5px"}},[a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/03/25/8jQfQH.png",text:"用户审核",badge:t.JoinCompanyNum},on:{click:function(e){return t.$router.push("/userCheck")}}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/03/25/8jQfQH.png",text:"报事任务",badge:t.meMessage.totalUntreatedEvent},on:{click:t.eventList}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/03/25/8j8X40.png",text:"任务清单"},on:{click:t.taskList}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/03/25/8j1dbR.png",text:"点检任务",badge:t.dianJianNum},on:{click:t.eventDetail}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/03/25/8jG5I1.png",to:"top",text:"我的排行榜"}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/05/09/YQ5UMT.png",text:"工作安排"},on:{click:t.dayTask}}),a("van-grid-item",{attrs:{icon:"https://s1.ax1x.com/2020/05/09/YQ5UMT.png",to:"keepWatch",text:"巡更任务",badge:t.xunGengNum}})],1)],1)])},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),i=(a("a481"),a("7f7f"),a("bd86")),r=a("2f62"),c=a("c1df"),u=a.n(c),p=(a("bc3a"),a("9788"));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={data:function(){return{title:"季帅帅",meMessage:{},status1:"在岗",status2:"脱岗",show:!1,myName:"",jurisdiction:"",eventNum:0,imgs:"",xunGengNum:"",dianJianNum:"",JoinCompanyNum:""}},components:{},created:function(){this.apiGetEventNum(),this.zuZhang(),localStorage.removeItem("userBObj")},mounted:function(){var t=this;localStorage.setItem("ciShu",0),this.comparison(localStorage.getItem("openid")),this.axios.get("/rest/tbEventReport/authRcEvent",{params:{uid:localStorage.getItem("uid")}}).then((function(e){t.jurisdiction=e})),this.keepAxios.post(this.baseUrl.keepAxios+"/app/patrolTask/getPatrolTaskDetailStatusList",{page:0,pageSize:9999,uid:localStorage.getItem("uid"),appStatus:1}).then((function(e){console.log(e),t.xunGengNum=e.data.data.records})),this.keepAxios.post(this.baseUrl.spotCheck+"/app/check/getCheckTaskDetailStatusList",{page:0,pageSize:9999,uid:localStorage.getItem("uid"),appStatus:1}).then((function(e){console.log(e),t.dianJianNum=e.data.data.records})),this.keepAxios.get(this.baseUrl.checkList+"/rest/appUser/applyJoinCompany",{params:{page:0,limit:9999,uid:localStorage.getItem("uid"),status:0}}).then((function(e){t.JoinCompanyNum=e.data.totalCount,console.log(e)}))},methods:m({},Object(r["b"])(["setEvent"]),{checkoutEvent:function(){this.setEvent({startTime:u()().format("YYYY-MM-DD HH:mm:ss"),details:"",assignerId:"",aDevice:[],duration:""}),this.$router.push({name:"checkoutEvent"})},eventDetail:function(){this.$router.push({name:"spotCheck"})},dayTask:function(){this.jurisdiction?this.$router.push("/dayTask"):this.$toast("你没有权限~")},my:function(){this.$router.push("my")},isStatus:function(){this.$router.push("types")},isStatus1:function(){this.show=!0},end:function(){var t=this;this.axios.get("/rest/tbEventTypeConfig/updateToWork",{params:{uid:localStorage.getItem("uid")}}).then((function(e){t.$toast("上岗成功"),t.flag="1",localStorage.setItem("shangGang","1"),console.log(t.flag),window.location.reload()}))},dian:function(){this.$toast("即将上线，尽情期待~")},department:function(){var t=this;this.axios.get("/rest/department/getCompanyByUid",{params:{uid:localStorage.getItem("uid")}}).then((function(e){console.log(e),5e4==e.code?t.$toast("系统异常"):(t.companyList=e,t.companyId=e.id,t.company=e.name,localStorage.setItem("companyId",e.id))}))},comparison:function(t){var e=this;this.axios.get("/rest/wxserver/checkUserOpenId",{params:{openId:t}}).then((function(t){return"null"==t||null==t?void e.$router.push("/login"):(localStorage.setItem("uid",t.uid),localStorage.setItem("userName",t.vserName),localStorage.setItem("deptName",t.deptName),localStorage.setItem("deptid",t.deptid),e.department(),e.personal(),void(null!=localStorage.getItem("uid")&&"null"!=localStorage.getItem("uid")&&""!=localStorage.getItem("uid")&&void 0!=localStorage.getItem("uid")||e.$router.push("/login")))}))},getUrlValue:function(t){var e=window.location.href,a=/([^?&=]+)=([^?&=]+)/g,s={};for(var o in e.replace(a,(function(){s[arguments[1]]=arguments[2]})),s)if(o==t)return s[o]},personal:function(){var t=this;this.axios.get("/rest/tbEventReport/getAppIndexData",{params:{uid:localStorage.getItem("uid")}}).then((function(e){5e4==e.code?t.$toast("系统异常"):(t.meMessage=e,t.myName=e.userName.substr(e.userName.length-2,2),localStorage.setItem("userName",e.userName))}))},eventList:function(){localStorage.setItem("action1",0),this.$router.push("/eventList")},taskList:function(){this.$router.push("/taskList")},apiGetEventNum:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["j"])({personId:localStorage.getItem("uid")});case 2:e=t.sent,this.eventNum=e.num;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),zuZhang:function(){this.keepAxios.post(this.baseUrl.keepAxios+"/rest/patrolCheckGroup/getPatrolCheckGroupByParam",{groupManage:localStorage.getItem("uid")}).then((function(t){console.log(t),0==t.data.data.rows.length?(localStorage.setItem("zu",!1),localStorage.setItem("zu1",!1)):1==t.data.data.rows[0].groupType?localStorage.setItem("zu",!0):2==t.data.data.rows[0].groupType&&localStorage.setItem("zu1",!0)}))}})},v=g,d=(a("f3bb"),a("2877")),h=Object(d["a"])(v,s,o,!1,null,"6d2e2910",null);e["default"]=h.exports},f3bb:function(t,e,a){"use strict";var s=a("0af2"),o=a.n(s);o.a}}]);