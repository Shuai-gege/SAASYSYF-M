(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90e948e0"],{"274a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[e.flag1?a("div",{staticClass:"title"},[e._v("请填写个人账号信息")]):a("div",{staticClass:"title"},[e._v("您还未加入任何企业")]),e.flag1?a("div",{staticClass:"con"},[a("van-form",{staticStyle:{padding:"15px"},on:{submit:e.onSubmit}},[a("van-field",{attrs:{name:"姓名",label:"姓名",placeholder:"姓名",rules:[{required:!0,message:"请填写姓名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"确认密码",rules:[{validator:e.affirmPSD,message:"两次密码不一致"}]},model:{value:e.affirmPassword,callback:function(t){e.affirmPassword=t},expression:"affirmPassword"}}),a("van-field",{attrs:{type:"tel",name:"pattern",label:"手机号",placeholder:"手机号",rules:[{pattern:e.pattern,message:"请填写正确的手机号"}]},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),a("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码",rules:[{required:!0,message:"请输入验证码"}]},scopedSlots:e._u([{key:"button",fn:function(){return[e.flag?a("van-count-down",{attrs:{time:e.time,format:"ss"},on:{finish:e.finish}}):a("van-button",{attrs:{size:"small",type:"primary",color:"#F5B98B","native-type":"button"},on:{click:e.smsCode}},[e._v("发送验证码")])]},proxy:!0}],null,!1,2255223475),model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}}),a("van-field",{attrs:{name:"uploader",label:"上传正面照"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{"max-count":1,"after-read":e.updateImg},on:{delete:e.remove},model:{value:e.uploader,callback:function(t){e.uploader=t},expression:"uploader"}})]},proxy:!0}],null,!1,2430309642)}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:e.register}},[e._v("下一步")])],1)],1)],1):a("div",{staticClass:"step"},[a("div",{staticClass:"btn"},[a("van-button",{attrs:{type:"primary",size:"large",color:"#64A5DC"},on:{click:e.apply}},[e._v("申请加入已有企业")]),a("van-button",{attrs:{type:"primary",size:"large",color:"#64A5DC"},on:{click:e.setUp}},[e._v("创建新的企业")]),a("van-button",{attrs:{type:"primary",size:"large",color:"#64A5DC"},on:{click:function(t){e.flag1=!0}}},[e._v("上一步")])],1)])])},r=[],n=(a("ac6a"),a("7f7f"),a("34ef"),a("4917"),a("28a5"),{data:function(){return{username:"",password:"",affirmPassword:"",tel:"",sms:"",uploader:[],base64:"",base64Arr:[],tuName:"",tuNameArr:[],flag:!1,flag1:!0,time:18e4,pattern:/^1[3|4|5|7|8][0-9]{9}$/,regObj:{base64:"",fileName:"",openId:localStorage.getItem("openid"),password:"",phone:"",userName:""}}},mounted:function(){this.flag1=this.$route.query.flag1},methods:{affirmPSD:function(e){return e==this.password},onSubmit:function(e){console.log("submit",e)},dataURLtoFile:function(e,t){var a=e.split(","),s=a[0].match(/:(.*?);/)[1],r=atob(a[1]),n=r.length,i=new Uint8Array(n);while(n--)i[n]=r.charCodeAt(n);return new File([i],t,{type:s})},updateImg:function(e){var t=this,a=document.createElement("canvas"),s=a.getContext("2d"),r=new Image;r.src=e.content,r.onload=function(){a.width=400,a.height=300,s.drawImage(r,0,0,400,300),e.content=a.toDataURL(e.file.type,.92);var n=t.dataURLtoFile(e.content,e.file.name),i=new FormData;i.append("file",n),i.append("code",t.applyNo),i.append("type","chat"),t.base64Arr.push(e.content),t.tuNameArr.push(e.file.name),t.base64=t.base64Arr.join("#"),t.tuName=t.tuNameArr.join(","),t.keepAxios.post(t.baseUrl.checkList+"/rest/appUser/img/upload",{base64:t.base64}).then((function(e){console.log(e),2e4==e.data.code?t.regObj.faceImg="http://47.100.240.228:8951/rest/user/img/"+e.data.result:t.$toast(e.data.msg)}))}},remove:function(e,t){var a=this;this.base64Arr.forEach((function(s){if(s==e.content)return a.base64Arr.splice(t.index,1)})),this.tuNameArr.forEach((function(s){if(s==e.file.name)return a.tuNameArr.splice(t.index,1)})),this.base64=this.base64Arr.join("#"),this.tuName=this.tuNameArr.join(",")},smsCode:function(){var e=this;this.axios.get("/rest/wxserver/checkUser",{params:{phone:this.tel}}).then((function(t){1==t?(e.$toast("此手机号已注册"),e.flag=!1):e.keepAxios.get(e.baseUrl.checkList+"/rest/appUser/getSMCode",{params:{phone:e.tel}}).then((function(t){2e4==t.data.code?(e.flag=!0,e.time=18e4,e.$toast(t.data.msg)):e.$toast(t.data.msg)}))}))},finish:function(){this.flag=!1},apply:function(){this.$router.push({name:"joinCompany",query:{obj:JSON.stringify(this.regObj)}})},setUp:function(){this.$router.push({name:"newFirm",query:{obj:JSON.stringify(this.regObj)}})},register:function(){var e=this;this.regObj.userName=this.username,this.regObj.password=this.password,this.regObj.phone=this.tel,this.regObj.verifyCode=this.sms,this.keepAxios.post(this.baseUrl.checkList+"/rest/appUser/accountRegister",this.regObj).then((function(t){2e4==t.data.code?(e.flag1=!1,e.$toast(t.data.msg)):e.$toast(t.data.msg)}))}}}),i=n,o=(a("2f7a"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,"0f79ec28",null);t["default"]=l.exports},"2f7a":function(e,t,a){"use strict";var s=a("97c8"),r=a.n(s);r.a},"97c8":function(e,t,a){},ac6a:function(e,t,a){for(var s=a("cadf"),r=a("0d58"),n=a("2aba"),i=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),p=c("toStringTag"),d=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(f),h=0;h<m.length;h++){var g,b=m[h],v=f[b],y=i[b],L=y&&y.prototype;if(L&&(L[u]||o(L,u,d),L[p]||o(L,p,b),l[b]=d,v))for(g in s)L[g]||n(L,g,s[g],!0)}}}]);