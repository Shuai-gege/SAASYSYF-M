(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acbb7b46"],{"42fb":function(t,e,s){"use strict";var a=s("990c"),i=s.n(a);i.a},"990c":function(t,e,s){},aa50:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("van-nav-bar",{attrs:{title:"事件详情","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":function(e){return t.$router.push("/userCheck")}}}),s("div",{staticClass:"con"},[s("div",{staticClass:"flex_s col"},[s("span",[t._v("申请时间:")]),s("span",[t._v(t._s(t._f("timeFilter")(t.obj.applyTime,"ymdhm")))])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("申请人:")]),s("span",[t._v(t._s(t.obj.applyName))])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("联系方式:")]),s("span",[t._v(t._s(t.obj.applyPhone))])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("申请部门:")]),s("span",[t._v(t._s(t.obj.applyDept))])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("申请原因:")]),s("span",[t._v(t._s(t.obj.applyRemark))])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("头像:")]),s("span",[s("img",{attrs:{src:t.obj.registerPic,alt:""}})])]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("分配部门:")]),0==t.options.length?s("span",[t._v("请登录PC端设置企业组织架构")]):s("span",[s("treeselect",{staticStyle:{"padding-right":"10px"},attrs:{options:t.options,placeholder:"选择部门",normalizer:t.normalizer},on:{select:t.section},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),s("div",{staticClass:"flex_s col"},[s("span",[t._v("用户赋权:")]),0==t.userArr.length?s("span",[t._v("请登录PC端设置用户权限角色")]):s("span",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectItem,expression:"selectItem"}],attrs:{name:"quanXian",id:"userQX"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectItem=e.target.multiple?s:s[0]},function(e){return t.abc(e)}]}},t._l(t.userArr,(function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])]),s("van-field",{attrs:{rows:"4",autosize:"",type:"textarea",maxlength:"120",placeholder:"请输入审核信息","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),s("div",{staticClass:"btn flex"},[s("van-button",{attrs:{color:"#999"},on:{click:function(e){return t.end("2")}}},[t._v("拒绝")]),s("van-button",{attrs:{color:"#a48f36"},on:{click:function(e){return t.end("1")}}},[t._v("确认")])],1)],1)},i=[],n=(s("6b54"),s("ac6a"),s("7f7f"),s("ca17")),o=s.n(n),r=(s("542c"),{components:{Treeselect:o.a},data:function(){return{message:"",value:null,obj:{},userArr:[],userId:"",buMenId:"",selectItem:"选择角色",options:[],normalizer:function(t){return console.log(t),{id:t.id,label:t.name,children:t.childrens}}}},mounted:function(){var t=this;this.obj=JSON.parse(this.$route.query.obj),this.keepAxios.get(this.baseUrl.checkList+"/rest/user/getRolesByCompanyId",{params:{companyId:localStorage.getItem("deptid")}}).then((function(e){t.userArr=[],e.data.result.forEach((function(e){e.name.indexOf("管理员")<=0&&t.userArr.push(e)})),console.log(t.userArr)})),this.keepAxios.get(this.baseUrl.checkList+"/rest/department/getAllDeptsByCompanyId",{params:{companyId:localStorage.getItem("deptid")}}).then((function(e){console.log(e),t.options=e.data.result}))},methods:{section:function(t,e){console.log(t),this.buMenId=t.id.toString()},end:function(t){var e=this;this.$toast.loading({message:"",forbidClick:!0,loadingType:"spinner"}),"1"==t?""==this.buMenId?this.$toast("请选择部门"):""==this.userId?this.$toast("请选择角色"):this.keepAxios.post(this.baseUrl.checkList+"/rest/appUser/auditingApply",{applyRemark:this.message,deptId:this.buMenId,registerApplyId:this.obj.id,roleId:this.userId,status:t}).then((function(t){console.log(t),e.$toast.clear(),2e4==t.data.code?(e.$toast(t.data.msg),e.$router.push("/userCheck")):e.$toast(t.data.msg)})):"2"==t&&this.keepAxios.post(this.baseUrl.checkList+"/rest/appUser/auditingApply",{applyRemark:this.message,deptId:this.buMenId,registerApplyId:this.obj.id,roleId:this.userId,status:t}).then((function(t){console.log(t),e.$toast.clear(),2e4==t.data.code?(e.$toast(t.data.msg),e.$router.push("/userCheck")):e.$toast(t.data.msg)}))},abc:function(t){console.log(t.target.value),this.userId=t.target.value}}}),l=r,c=(s("42fb"),s("2877")),u=Object(c["a"])(l,a,i,!1,null,"8ca7bcb6",null);e["default"]=u.exports},ac6a:function(t,e,s){for(var a=s("cadf"),i=s("0d58"),n=s("2aba"),o=s("7726"),r=s("32e9"),l=s("84f2"),c=s("2b4c"),u=c("iterator"),p=c("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(h),f=0;f<m.length;f++){var v,g=m[f],b=h[g],_=o[g],y=_&&_.prototype;if(y&&(y[u]||r(y,u,d),y[p]||r(y,p,g),l[g]=d,b))for(v in a)y[v]||n(y,v,a[v],!0)}}}]);