(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2a5dc1e"],{"4eef":function(e,t,i){},"9d0a":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{staticClass:"con"},[i("div",{staticClass:"maxBox"},[i("div",{staticClass:"minBox flex",on:{click:function(t){e.show=!0}}},[i("p",[e._v("人员选择")]),i("div",[i("span",[e._v(e._s(e.userName1))]),i("van-icon",{attrs:{name:"arrow"}})],1)]),i("van-action-sheet",{attrs:{title:"人员选择",accordion:!0,"close-icon":""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"content"},e._l(e.personList,(function(t,s){return i("van-checkbox",{key:s,attrs:{"checked-color":"#A68F43","icon-size":"20"},on:{change:function(i){return e.xuan(t.uid,t.checked,t.vserName)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item02.checked"}},[e._v(e._s(t.vserName))])})),1)]),i("van-field",{attrs:{label:"指定开始时间",placeholder:"指定开始时间","input-align":"right",disabled:!0},on:{click:function(t){e.flag=!0}},model:{value:e.actionTime,callback:function(t){e.actionTime=t},expression:"actionTime"}}),e.flag?i("van-datetime-picker",{attrs:{type:"datetime","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.time},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}}):e._e(),i("van-field",{attrs:{label:"指定计划工时",placeholder:"单位：小时","input-align":"right",type:"number"},on:{touchstart:function(t){t.stopPropagation(),e.show100=!0}},model:{value:e.overTime,callback:function(t){e.overTime=t},expression:"overTime"}}),i("van-field",{attrs:{rows:"2",autosize:"",label:"备注",type:"textarea",maxlength:"50",placeholder:"请输入分配备注","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),i("div",{staticClass:"btn flex"},[i("van-button",{attrs:{color:"#999"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),i("van-button",{attrs:{color:"#A68F43"},on:{click:e.end}},[e._v("确定")])],1)])])},n=[],a=(i("a481"),i("5df3"),i("4f7f"),i("75fc")),o=(i("ac6a"),{components:{},data:function(){return{minDate:new Date(new Date),maxDate:new Date("2025/10/1"),currentDate:new Date,flag:!1,show:!1,actionTime:"",overTime:"",message:"",activeNames:[],activeNames1:[],checked:!1,company:[],personList:[],personUid:[],personUidStr:"",userName:[],userName1:"",arr:[],show100:!1,type_dept:""}},mounted:function(){var e=this;this.type_dept=this.$route.query.type_dept,this.actionTime=this.getLocalTime(new Date),this.axios.post("/rest/tbEventTypeConfig/list",{uid:localStorage.getItem("uid"),id:this.type_dept}).then((function(t){e.personList=t.rows[0].getUserInfoExecute,e.personList.forEach((function(t){e.$set(t,"checked",e.checked)})),console.log(t.rows)}))},methods:{onInput:function(e){this.arr.push(e),this.overTime=this.arr.join("")},onDelete:function(){this.$toast("删除")},time:function(e){var t=e,i=t.getFullYear()+"-"+this.p(t.getMonth()+1)+"-"+this.p(t.getDate()),s=this.p(t.getHours())+":"+this.p(t.getMinutes())+":"+this.p(t.getSeconds());this.flag=!1,this.actionTime=i+" "+s},p:function(e){return e<10?"0"+e:e},xuan:function(e,t,i){if(console.log(e),console.log(t),1==t)this.personUid.push(e),this.userName.push(i);else if(1!=t){var s=this.personUid.indexOf(e),n=this.userName.indexOf(i);-1!==s&&this.personUid.splice(s,1),-1!==n&&this.userName.splice(n,1)}this.personUid=Object(a["a"])(new Set(this.personUid)),this.userName=Object(a["a"])(new Set(this.userName)),this.personUidStr=this.personUid.join(","),this.userName1=this.userName.join("/")},getLocalTime:function(e){var t=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),n=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return t+"/"+this.p(i)+"/"+this.p(s)+" "+this.p(n)+":"+this.p(a)+":"+this.p(o)},end:function(){var e=this,t=new Date(this.actionTime.replace(/\-/g,"/"));""==this.userName1?this.$toast("请选择人员"):""==this.actionTime?this.$toast("请选择开始时间"):""==this.overTime?this.$toast("请选择计划工时"):this.axios.post("/rest/tbEventAllocation/add",{duration:this.overTime,remark:this.message,reportEventId:sessionStorage.getItem("id"),startTime:t,uid:localStorage.getItem("uid"),userId:this.personUidStr}).then((function(t){e.$toast("分配成功"),e.$router.push("/eventList")}))}}}),r=o,c=(i("d497"),i("2877")),l=Object(c["a"])(r,s,n,!1,null,"13b259c8",null);t["default"]=l.exports},d497:function(e,t,i){"use strict";var s=i("4eef"),n=i.n(s);n.a}}]);